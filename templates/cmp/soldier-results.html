{% extends "base.html" %}
{% load static crispy_forms_tags %}
{% load humanize %}
{% block title %}Results{% endblock %}

{% block content %}

<div class="center-content">
    <img src="{% static 'cmp/cmp-masthead.svg' %}" style="width:350px; height:auto;" alt="The badge of the Royal Military Police">
    <h2> Corps of Military Police</h2>
</div>

<div class="center-content">
<p>
   A dataset consisting of {{ cmp_soldier_count|default:0|intcomma }} soldiers of the Corps of Military Police, Corps of Military Police (India) and Royal Military Police holding  records of 
   {{ cmp_casualty_count|default:0 }} casualties with memorials in {{ cmp_cemetery_count|default:0|intcomma }} cemeteries across {{ cmp_country_count|default:0|intcomma }} countries, {{ cmp_decoration_count|default:0|intcomma  }} decorations/medals and {{ cmp_prisoner_count|default:0|intcomma }} Prisoners of War. 
   Casualties are linked to the Commonwealth War Graves Commission (CWGC). Where known a link to the London Gazette entry for decoration/awards is provided. 
   Use the <a href="/tools/army-number-search" %}">Army Number Search</a> tool to find original regimental number blocks.
   To learn more about the Corps of Military Police/Royal Military Police contact the official RMP museum at: <a href="http://www.rhqrmp.org">RHQ RMP Website</a>
</p>
</div>

<div class="center-content">
    <!-- Search Form -->
<form method="get" action="{% url 'index' %}">
    <input type="text" name="name" value="{{ surname }}" placeholder="Search by surname or army number">
    <button type="submit">Search</button>
</form>
</div>

{% if page_obj %}   
<div class="center-content">
<table class="content-table">
    <thead>
        <tr>
            <th>Surname</th>
            <th>Initials</th>
            <th>Rank</th>
            <th>Army Number</th>
        </tr>
    </thead>
    <tbody>
        {% for soldier in page_obj %}
        <tr>
            <td><a href="{% url 'soldier' soldier.id %}">{{ soldier.surname }}</a></td>
            <td>{{ soldier.initials }}</td>
            <td>{{ soldier.rank }}</td>
            <td>{{ soldier.army_number}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div></div>
<div>
</div>

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1&name={{ surname }}">First</a>
            <a href="?page={{ page_obj.previous_page_number }}&name={{ surname }}">Previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}&name={{ surname }}">Next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}&name={{ surname }}">Last</a>
        {% endif %}
    </span>
</div>

{% endif %}
{% endblock %}